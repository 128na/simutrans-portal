[2025-11-29 16:35:14] local.WARNING: Slow pak/zip file processing detected {"attachment_id":2301,"filename":"German市内建築移植のソース.zip","duration_seconds":37.04}
[2025-11-29 16:35:28] local.WARNING: Slow pak/zip file processing detected {"attachment_id":2456,"filename":"KSN-128dsnp_RBDT_v20_Fullset.zip","duration_seconds":40.0}
[2025-11-29 16:35:54] local.WARNING: Slow pak/zip file processing detected {"attachment_id":2445,"filename":"KSN-128dsop_RBDT_v20_Fullset.zip","duration_seconds":39.86}

[2025-11-29 16:31:43] local.ERROR: Unable to encode attribute [data] for model [App\Models\Attachment\FileInfo] to JSON: Malformed UTF-8 characters, possibly incorrectly encoded. {"exception":"[object] (Illuminate\\Database\\Eloquent\\JsonEncodingException(code: 0): Unable to encode attribute [data] for model [App\\Models\\Attachment\\FileInfo] to JSON: Malformed UTF-8 characters, possibly incorrectly encoded. at C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\JsonEncodingException.php:47)
[stacktrace]
#0 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Concerns\\HasAttributes.php(1357): Illuminate\\Database\\Eloquent\\JsonEncodingException::forAttribute(Object(App\\Models\\Attachment\\FileInfo), 'data', 'Malformed UTF-8...')
#1 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Concerns\\HasAttributes.php(1091): Illuminate\\Database\\Eloquent\\Model->castAttributeAsJson('data', false)
#2 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(619): Illuminate\\Database\\Eloquent\\Model->setAttribute('data', Array)
#3 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(742): Illuminate\\Database\\Eloquent\\Model->fill(Array)
#4 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\helpers.php(390): Illuminate\\Database\\Eloquent\\Builder->{closure:Illuminate\\Database\\Eloquent\\Builder::updateOrCreate():740}(Object(App\\Models\\Attachment\\FileInfo))
#5 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Builder.php(740): tap(Object(App\\Models\\Attachment\\FileInfo), Object(Closure))
#6 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Support\\Traits\\ForwardsCalls.php(23): Illuminate\\Database\\Eloquent\\Builder->updateOrCreate(Array, Array)
#7 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Database\\Eloquent\\Model.php(2540): Illuminate\\Database\\Eloquent\\Model->forwardCallTo(Object(Illuminate\\Database\\Eloquent\\Builder), 'updateOrCreate', Array)
#8 C:\\dev\\simutrans-portal\\app\\Repositories\\Attachment\\FileInfoRepository.php(27): Illuminate\\Database\\Eloquent\\Model->__call('updateOrCreate', Array)
#9 C:\\dev\\simutrans-portal\\app\\Services\\FileInfo\\FileInfoService.php(64): App\\Repositories\\Attachment\\FileInfoRepository->updateOrCreate(Array, Array)
#10 C:\\dev\\simutrans-portal\\app\\Jobs\\Attachments\\UpdateFileInfo.php(55): App\\Services\\FileInfo\\FileInfoService->updateOrCreateFromZip(Object(App\\Models\\Attachment))
#11 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\BoundMethod.php(36): App\\Jobs\\Attachments\\UpdateFileInfo->handle(Object(App\\Services\\FileInfo\\FileInfoService))
#12 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\Util.php(43): Illuminate\\Container\\BoundMethod::{closure:Illuminate\\Container\\BoundMethod::call():35}()
#13 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\BoundMethod.php(96): Illuminate\\Container\\Util::unwrapIfClosure(Object(Closure))
#14 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\BoundMethod.php(35): Illuminate\\Container\\BoundMethod::callBoundMethod(Object(Illuminate\\Foundation\\Application), Array, Object(Closure))
#15 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\Container.php(836): Illuminate\\Container\\BoundMethod::call(Object(Illuminate\\Foundation\\Application), Array, Array, NULL)
#16 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Bus\\Dispatcher.php(129): Illuminate\\Container\\Container->call(Array)
#17 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Bus\\Dispatcher->{closure:Illuminate\\Bus\\Dispatcher::dispatchNow():126}(Object(App\\Jobs\\Attachments\\UpdateFileInfo))
#18 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(137): Illuminate\\Pipeline\\Pipeline->{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():178}(Object(App\\Jobs\\Attachments\\UpdateFileInfo))
#19 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Bus\\Dispatcher.php(133): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#20 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\CallQueuedHandler.php(134): Illuminate\\Bus\\Dispatcher->dispatchNow(Object(App\\Jobs\\Attachments\\UpdateFileInfo), false)
#21 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Queue\\CallQueuedHandler->{closure:Illuminate\\Queue\\CallQueuedHandler::dispatchThroughMiddleware():127}(Object(App\\Jobs\\Attachments\\UpdateFileInfo))
#22 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(137): Illuminate\\Pipeline\\Pipeline->{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():178}(Object(App\\Jobs\\Attachments\\UpdateFileInfo))
#23 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\CallQueuedHandler.php(127): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#24 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\CallQueuedHandler.php(68): Illuminate\\Queue\\CallQueuedHandler->dispatchThroughMiddleware(Object(Illuminate\\Queue\\Jobs\\DatabaseJob), Object(App\\Jobs\\Attachments\\UpdateFileInfo))
#25 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\Jobs\\Job.php(102): Illuminate\\Queue\\CallQueuedHandler->call(Object(Illuminate\\Queue\\Jobs\\DatabaseJob), Array)
#26 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\Worker.php(451): Illuminate\\Queue\\Jobs\\Job->fire()
#27 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\Worker.php(401): Illuminate\\Queue\\Worker->process('database', Object(Illuminate\\Queue\\Jobs\\DatabaseJob), Object(Illuminate\\Queue\\WorkerOptions))
#28 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\Worker.php(187): Illuminate\\Queue\\Worker->runJob(Object(Illuminate\\Queue\\Jobs\\DatabaseJob), 'database', Object(Illuminate\\Queue\\WorkerOptions))
#29 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\Console\\WorkCommand.php(148): Illuminate\\Queue\\Worker->daemon('database', 'parse', Object(Illuminate\\Queue\\WorkerOptions))
#30 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\Console\\WorkCommand.php(131): Illuminate\\Queue\\Console\\WorkCommand->runWorker('database', 'parse')
#31 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\BoundMethod.php(36): Illuminate\\Queue\\Console\\WorkCommand->handle()
#32 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\Util.php(43): Illuminate\\Container\\BoundMethod::{closure:Illuminate\\Container\\BoundMethod::call():35}()
#33 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\BoundMethod.php(96): Illuminate\\Container\\Util::unwrapIfClosure(Object(Closure))
#34 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\BoundMethod.php(35): Illuminate\\Container\\BoundMethod::callBoundMethod(Object(Illuminate\\Foundation\\Application), Array, Object(Closure))
#35 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\Container.php(836): Illuminate\\Container\\BoundMethod::call(Object(Illuminate\\Foundation\\Application), Array, Array, NULL)
#36 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Console\\Command.php(211): Illuminate\\Container\\Container->call(Array)
#37 C:\\dev\\simutrans-portal\\vendor\\symfony\\console\\Command\\Command.php(318): Illuminate\\Console\\Command->execute(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Illuminate\\Console\\OutputStyle))
#38 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Console\\Command.php(180): Symfony\\Component\\Console\\Command\\Command->run(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Illuminate\\Console\\OutputStyle))
#39 C:\\dev\\simutrans-portal\\vendor\\symfony\\console\\Application.php(1073): Illuminate\\Console\\Command->run(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#40 C:\\dev\\simutrans-portal\\vendor\\symfony\\console\\Application.php(356): Symfony\\Component\\Console\\Application->doRunCommand(Object(Illuminate\\Queue\\Console\\WorkCommand), Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#41 C:\\dev\\simutrans-portal\\vendor\\symfony\\console\\Application.php(195): Symfony\\Component\\Console\\Application->doRun(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#42 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Console\\Kernel.php(197): Symfony\\Component\\Console\\Application->run(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#43 C:\\dev\\simutrans-portal\\artisan(35): Illuminate\\Foundation\\Console\\Kernel->handle(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#44 {main}
"}

[2025-11-29 16:29:30] local.ERROR: Invalid or uninitialized Zip object {"exception":"[object] (ValueError(code: 0): Invalid or uninitialized Zip object at C:\\dev\\simutrans-portal\\app\\Services\\FileInfo\\ZipArchiveParser.php:45)
[stacktrace]
#0 C:\\dev\\simutrans-portal\\app\\Services\\FileInfo\\ZipArchiveParser.php(45): ZipArchive->close()
#1 C:\\dev\\simutrans-portal\\app\\Services\\FileInfo\\FileInfoService.php(53): App\\Services\\FileInfo\\ZipArchiveParser->{closure:App\\Services\\FileInfo\\ZipArchiveParser::parseContent():26}()
#2 C:\\dev\\simutrans-portal\\app\\Jobs\\Attachments\\UpdateFileInfo.php(55): App\\Services\\FileInfo\\FileInfoService->updateOrCreateFromZip(Object(App\\Models\\Attachment))
#3 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\BoundMethod.php(36): App\\Jobs\\Attachments\\UpdateFileInfo->handle(Object(App\\Services\\FileInfo\\FileInfoService))
#4 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\Util.php(43): Illuminate\\Container\\BoundMethod::{closure:Illuminate\\Container\\BoundMethod::call():35}()
#5 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\BoundMethod.php(96): Illuminate\\Container\\Util::unwrapIfClosure(Object(Closure))
#6 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\BoundMethod.php(35): Illuminate\\Container\\BoundMethod::callBoundMethod(Object(Illuminate\\Foundation\\Application), Array, Object(Closure))
#7 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\Container.php(836): Illuminate\\Container\\BoundMethod::call(Object(Illuminate\\Foundation\\Application), Array, Array, NULL)
#8 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Bus\\Dispatcher.php(129): Illuminate\\Container\\Container->call(Array)
#9 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Bus\\Dispatcher->{closure:Illuminate\\Bus\\Dispatcher::dispatchNow():126}(Object(App\\Jobs\\Attachments\\UpdateFileInfo))
#10 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(137): Illuminate\\Pipeline\\Pipeline->{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():178}(Object(App\\Jobs\\Attachments\\UpdateFileInfo))
#11 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Bus\\Dispatcher.php(133): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#12 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\CallQueuedHandler.php(134): Illuminate\\Bus\\Dispatcher->dispatchNow(Object(App\\Jobs\\Attachments\\UpdateFileInfo), false)
#13 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(180): Illuminate\\Queue\\CallQueuedHandler->{closure:Illuminate\\Queue\\CallQueuedHandler::dispatchThroughMiddleware():127}(Object(App\\Jobs\\Attachments\\UpdateFileInfo))
#14 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Pipeline\\Pipeline.php(137): Illuminate\\Pipeline\\Pipeline->{closure:Illuminate\\Pipeline\\Pipeline::prepareDestination():178}(Object(App\\Jobs\\Attachments\\UpdateFileInfo))
#15 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\CallQueuedHandler.php(127): Illuminate\\Pipeline\\Pipeline->then(Object(Closure))
#16 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\CallQueuedHandler.php(68): Illuminate\\Queue\\CallQueuedHandler->dispatchThroughMiddleware(Object(Illuminate\\Queue\\Jobs\\DatabaseJob), Object(App\\Jobs\\Attachments\\UpdateFileInfo))
#17 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\Jobs\\Job.php(102): Illuminate\\Queue\\CallQueuedHandler->call(Object(Illuminate\\Queue\\Jobs\\DatabaseJob), Array)
#18 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\Worker.php(451): Illuminate\\Queue\\Jobs\\Job->fire()
#19 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\Worker.php(401): Illuminate\\Queue\\Worker->process('database', Object(Illuminate\\Queue\\Jobs\\DatabaseJob), Object(Illuminate\\Queue\\WorkerOptions))
#20 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\Worker.php(187): Illuminate\\Queue\\Worker->runJob(Object(Illuminate\\Queue\\Jobs\\DatabaseJob), 'database', Object(Illuminate\\Queue\\WorkerOptions))
#21 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\Console\\WorkCommand.php(148): Illuminate\\Queue\\Worker->daemon('database', 'parse', Object(Illuminate\\Queue\\WorkerOptions))
#22 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Queue\\Console\\WorkCommand.php(131): Illuminate\\Queue\\Console\\WorkCommand->runWorker('database', 'parse')
#23 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\BoundMethod.php(36): Illuminate\\Queue\\Console\\WorkCommand->handle()
#24 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\Util.php(43): Illuminate\\Container\\BoundMethod::{closure:Illuminate\\Container\\BoundMethod::call():35}()
#25 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\BoundMethod.php(96): Illuminate\\Container\\Util::unwrapIfClosure(Object(Closure))
#26 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\BoundMethod.php(35): Illuminate\\Container\\BoundMethod::callBoundMethod(Object(Illuminate\\Foundation\\Application), Array, Object(Closure))
#27 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Container\\Container.php(836): Illuminate\\Container\\BoundMethod::call(Object(Illuminate\\Foundation\\Application), Array, Array, NULL)
#28 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Console\\Command.php(211): Illuminate\\Container\\Container->call(Array)
#29 C:\\dev\\simutrans-portal\\vendor\\symfony\\console\\Command\\Command.php(318): Illuminate\\Console\\Command->execute(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Illuminate\\Console\\OutputStyle))
#30 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Console\\Command.php(180): Symfony\\Component\\Console\\Command\\Command->run(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Illuminate\\Console\\OutputStyle))
#31 C:\\dev\\simutrans-portal\\vendor\\symfony\\console\\Application.php(1073): Illuminate\\Console\\Command->run(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#32 C:\\dev\\simutrans-portal\\vendor\\symfony\\console\\Application.php(356): Symfony\\Component\\Console\\Application->doRunCommand(Object(Illuminate\\Queue\\Console\\WorkCommand), Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#33 C:\\dev\\simutrans-portal\\vendor\\symfony\\console\\Application.php(195): Symfony\\Component\\Console\\Application->doRun(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#34 C:\\dev\\simutrans-portal\\vendor\\laravel\\framework\\src\\Illuminate\\Foundation\\Console\\Kernel.php(197): Symfony\\Component\\Console\\Application->run(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#35 C:\\dev\\simutrans-portal\\artisan(35): Illuminate\\Foundation\\Console\\Kernel->handle(Object(Symfony\\Component\\Console\\Input\\ArgvInput), Object(Symfony\\Component\\Console\\Output\\ConsoleOutput))
#36 {main}
"}
